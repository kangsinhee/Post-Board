{% extends 'layout.html' %}
{% block content %}
<div>
    <div>
        <ul style="display: flex; list-style: none; justify-content: space-between; padding-left:0px">
            <li><b> {{ post.title }} </b></li>
            <li>
                {% if post.writer == user %}
                <a href="{{ url_for('edit', uuid=post.uuid) }}" style="text-decoration: none; color: #6511f0"> [ 수정 ] </a>
                <a href="{{ url_for('delete', uuid=post.uuid) }}" style="text-decoration: none; color: #6511f0"> [ 삭제 ]  </a>
                {% endif %}
                <a href="{{ url_for('index') }}" style="text-decoration: none; color: #6511f0; margin-left: 5px"> [ 목록으로 ] </a>
            </li>
        </ul><hr>
        <ul style="display: flex; list-style: none; justify-content: space-between; padding-left:0px">
            <li style="font-size: 13px;"><a> {{ post.created_at }} </a></li>
            <li style="font-size: 13px;"><a> {{ post.writer }} </a> </li>
        </ul><hr>

        <p>
            <pre style="line-height: 25px; font-size: 15px; white-space: pre-wrap">{{ post.content }}</pre>
        </p>

        <ul style="display: flex; list-style: none; justify-content: space-between; padding-left:0px">
            <li>
                {% if Next != None %}
                <b> ← </b>
                <a href="{{ url_for('viewpost', uuid=Next.uuid) }}" style="text-decoration: none; color: #6511f0"> {{ Next.title }} </a>
                {% endif %}
            </li>
            <li>
                {% if Previous != None %}
                <a href="{{ url_for('viewpost', uuid=Previous.uuid) }}" style="text-decoration: none; color: #6511f0"> {{ Previous.title }} </a>
                <b> → </b>
                {% endif %}
            </li>
        </ul>

    </div>
    <div>
        <form action="" method="POST">
            <div>
                {% if user != None %}
                    <b> [ {{ user }} ] </b>
                    <label for = "content">댓글남기기</label><br>
                    <textarea type="text" name="content" id="content", style="height: 60px; width: 500px"></textarea><br>
                    <button type="submit">추가</button>
                {% else %}
                <b> 로그인이 필요합니다. </b>
                {% endif %}
            </div>
        </form>
    </div>
    <div>
        {% for item in comment %}
            <acticle>
                <ul style="display: flex; list-style: none; justify-content: space-between; padding-left:0px">
                    <li><b> {{ item.nickname }} </b></li>
                    <li><a> {{ item.create_time }} </a></li>
                </ul>
                {{ item.content }}<br>
                <ul style="display: flex; list-style: none; justify-content: space-between; padding-left:0px">
                    <li>
                        <a href="{{ url_for('c_comment', uuid = post.uuid, c_uuid=item.uuid) }}" style="text-decoration: none; color: #6511f0"> 답글달기 </a>
                    </li>
                    {% if item.nickname == user %}
                    <li>
                        <a href="{{ url_for('edit_comment', uuid = post.uuid, c_uuid=item.uuid) }}" style="text-decoration: none; color: #6511f0"> [ 수정 ] </a>
                        <a href="{{ url_for('delete_comment', uuid = post.uuid, c_uuid=item.uuid) }}" style="text-decoration: none; color: #6511f0"> [ 삭제 ]</a>
                    </li>
                    {% endif %}
                </ul>
            </acticle>
            {% for c_item in c_comment %}
            <div style="padding-left: 40px">
                <acticle>
                    {% if c_item.comment_id == item.uuid %}
                    <hr>
                    <ul style="display: flex; list-style: none; justify-content: space-between; padding-left:0px">
                        <li><b> {{ c_item.nickname }} </b></li>
                        <li><a> {{ c_item.create_time }} </a></li>
                    </ul>
                    {{ c_item.content }}<br>
                    <p>
                        {% if c_item.nickname == user %}
                        <a href="{{ url_for('edit_c_comment', uuid = post.uuid, c_uuid=c_item.uuid) }}" style="text-decoration: none; color: #6511f0"> [ 수정 ] </a>
                        <a href="{{ url_for('delete_c_comment', uuid = post.uuid, c_uuid=c_item.uuid) }}" style="text-decoration: none; color: #6511f0"> [ 삭제 ]</a>
                        {% endif %}
                    </p>
                    {% endif %}
                </acticle>
            </div>
            {% endfor %}
        <hr>
        {% endfor %}
    </div>
</div>
{% endblock %}
